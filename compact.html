<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>PFML: Pointer-First Metadata Layer (Next Step After HIML)</title>
  <meta name="description" content="PFML is a pointer-first, ultra-compact metadata shim that extends HIML with progressive disclosure: fast Tier-0 filtering on-page, deeper CID-addressed docs off-page."/>
  <style>
    :root{
      --bg:#070A12;
      --panel:#0E1324;
      --panel2:#0B1020;
      --text:#EAF0FF;
      --muted:#AAB6D6;
      --faint:#6E7AA6;
      --line:#1D2550;
      --accent:#77D4FF;
      --accent2:#C58BFF;
      --good:#72FFB6;
      --warn:#FFD27A;
      --bad:#FF7A9A;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      --shadow: 0 10px 35px rgba(0,0,0,.35);
      --r: 18px;
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(900px 600px at 15% 20%, rgba(119,212,255,.18), transparent 55%),
        radial-gradient(900px 600px at 85% 10%, rgba(197,139,255,.16), transparent 55%),
        radial-gradient(700px 500px at 50% 95%, rgba(114,255,182,.10), transparent 60%),
        linear-gradient(180deg, #060914 0%, #050714 60%, #040513 100%);
    }
    a{color:var(--accent); text-decoration:none;}
    a:hover{text-decoration:underline;}
    .wrap{max-width:1080px; margin:0 auto; padding:28px 18px 72px;}
    .topbar{
      display:flex; gap:12px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
      padding:14px 16px;
      border:1px solid var(--line);
      border-radius:999px;
      background:rgba(10,14,30,.6);
      box-shadow:var(--shadow);
      position:sticky; top:14px; z-index:10;
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      font-weight:700; letter-spacing:.3px;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 18px rgba(119,212,255,.35);
    }
    .pillrow{display:flex; gap:8px; flex-wrap:wrap;}
    .pill{
      font-size:12px;
      color:var(--muted);
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      background:rgba(14,19,36,.55);
    }
    .hero{padding:42px 6px 22px;}
    h1{
      font-size: clamp(30px, 4.1vw, 54px);
      margin:0 0 10px;
      line-height:1.06;
      letter-spacing:-.6px;
    }
    .subtitle{
      max-width:900px;
      font-size:16px;
      color:var(--muted);
      line-height:1.55;
      margin:0 0 18px;
    }
    .cta{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin-top:16px;
    }
    .btn{
      display:inline-flex; align-items:center; gap:9px;
      padding:12px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(14,19,36,.75);
      color:var(--text);
      box-shadow:var(--shadow);
      font-weight:600;
    }
    .btn:hover{transform: translateY(-1px); transition: .12s ease;}
    .btn.primary{
      border-color: rgba(119,212,255,.45);
      background: linear-gradient(135deg, rgba(119,212,255,.16), rgba(197,139,255,.14));
    }
    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
      align-items:stretch;
      margin-top:20px;
    }
    @media (max-width: 920px){
      .grid{grid-template-columns:1fr;}
      .topbar{position:relative; top:auto;}
    }
    .card{
      border:1px solid var(--line);
      border-radius:var(--r);
      background:rgba(14,19,36,.55);
      box-shadow:var(--shadow);
      padding:18px 18px;
    }
    .card h2{
      margin:0 0 10px;
      font-size:18px;
      letter-spacing:-.2px;
    }
    .card p{margin:0; color:var(--muted); line-height:1.6;}
    .kpi{
      display:grid;
      grid-template-columns:repeat(2, minmax(0,1fr));
      gap:10px;
      margin-top:12px;
    }
    .k{
      padding:12px 12px;
      border:1px dashed rgba(170,182,214,.22);
      border-radius:14px;
      background:rgba(6,10,18,.35);
    }
    .k b{display:block; font-size:12px; color:var(--faint); letter-spacing:.5px; text-transform:uppercase;}
    .k span{display:block; font-size:14px; margin-top:6px; color:var(--text);}
    section{margin-top:18px;}
    h3{
      margin:0 0 10px;
      font-size:16px;
      letter-spacing:-.2px;
      color:var(--text);
    }
    ul{margin:10px 0 0 18px; color:var(--muted); line-height:1.65;}
    li{margin:6px 0;}
    .mono{
      font-family:var(--mono);
      font-size:12px;
      line-height:1.55;
      color:#DCE6FF;
      background:rgba(6,10,18,.55);
      border:1px solid rgba(119,212,255,.14);
      border-radius:14px;
      padding:12px 12px;
      overflow:auto;
    }
    .tag{
      display:inline-flex; align-items:center;
      font-family:var(--mono);
      font-size:12px;
      padding:6px 8px;
      border-radius:999px;
      border:1px solid rgba(170,182,214,.22);
      background:rgba(6,10,18,.35);
      color:var(--muted);
      margin-right:6px;
      margin-top:6px;
    }
    .cols{
      display:grid;
      grid-template-columns:repeat(3, minmax(0,1fr));
      gap:14px;
      margin-top:12px;
    }
    @media (max-width: 920px){
      .cols{grid-template-columns:1fr;}
    }
    .small{font-size:13px; color:var(--muted); line-height:1.65;}
    .hr{height:1px; background:linear-gradient(90deg, transparent, rgba(119,212,255,.18), rgba(197,139,255,.18), transparent); margin:18px 0;}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(170,182,214,.22);
      background:rgba(6,10,18,.35);
      color:var(--muted);
    }
    .badge i{
      width:9px; height:9px; border-radius:999px; display:inline-block;
      background: linear-gradient(135deg, var(--good), var(--accent));
      box-shadow: 0 0 14px rgba(114,255,182,.25);
    }
    footer{margin-top:26px; color:var(--faint); font-size:12px;}
    code{font-family:var(--mono);}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <span class="dot"></span>
        <span>PFML</span>
        <span class="pill">Pointer-First Metadata Layer</span>
      </div>
      <div class="pillrow">
        <span class="pill">Builds on <a href="https://gb2022official-maker.github.io/HIML/" target="_blank" rel="noreferrer">HIML</a></span>
        <span class="pill">Tier-0 filter → Tier-1 doc → Tier-2 custom</span>
        <span class="pill">Compact • Deterministic • Traversable</span>
      </div>
    </div>

    <header class="hero">
      <h1>PFML: The “thin metadata, thick pointer” evolution of HIML</h1>
      <p class="subtitle">
        HIML gives us a canonical, content-addressed annotation document (CID) and a compact capsule for grounded supervision.
        PFML adds the missing “web-native” step: a tiny, index-first micro layer that lives on the page (or in headers),
        and <b>only fetches the big annotation doc when a machine or search actually needs detail</b>.
      </p>

      <div class="cta">
        <a class="btn primary" href="#executive">Read Executive Summary</a>
        <a class="btn" href="#spec">Tier-0 Micro Spec</a>
        <a class="btn" href="#workflow">Fetch + Query Workflow</a>
        <a class="btn" href="#prior">Has this been done before?</a>
      </div>

      <div class="grid">
        <div class="card">
          <h2>What PFML is</h2>
          <p>
            A minimal “compass” metadata shim that carries <b>coarse, cheap signals</b>
            (object class, quadrant occupancy, tiny attributes, count buckets) plus a <b>pointer</b>
            (CID/URL) to richer off-page annotation docs.
            It is designed to cut obvious mismatches fast and reduce wasted compute at scale.
          </p>

          <div class="kpi">
            <div class="k"><b>Tier-0 goal</b><span>Discard 90–99% cheaply</span></div>
            <div class="k"><b>Tier-1 goal</b><span>Verify precisely (boxes/points)</span></div>
            <div class="k"><b>Tier-2 goal</b><span>Domain extensions (optional)</span></div>
            <div class="k"><b>Design vow</b><span>Never bloat pages</span></div>
          </div>
        </div>

        <div class="card">
          <h2>Why it matters</h2>
          <p>
            Most systems either ship fuzzy text (low precision) or heavy annotations (high overhead).
            PFML is progressive disclosure for metadata: <b>tiny always</b>, <b>big only on demand</b>.
          </p>
          <div class="hr"></div>
          <div class="small">
            <span class="badge"><i></i>Optimized for traversability</span>
            <div style="margin-top:10px;">
              <div class="tag">index-first</div>
              <div class="tag">low cardinality tokens</div>
              <div class="tag">cache-perfect pointers</div>
              <div class="tag">deterministic encoding</div>
              <div class="tag">privacy-safe defaults</div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <section id="executive" class="card">
      <h2>Executive summary</h2>
      <p class="small">
        <b>HIML</b> introduces a canonical scene document (CID-addressed) and a compact capsule for embedding and training.
        <b>PFML</b> is the next step: it standardizes a <b>Tier-0 micro layer</b> that is tiny enough to ship everywhere (HTML meta, HTTP headers, sidecars)
        and powerful enough to filter large datasets quickly.
        When a query needs specificity, PFML uses the pointer to retrieve the full HIML doc (Tier-1) or an optional extension doc (Tier-2).
      </p>

      <h3 style="margin-top:14px;">Core promise</h3>
      <ul>
        <li><b>Compactness:</b> Tier-0 stays within a strict byte/token budget.</li>
        <li><b>Traversability:</b> Tier-0 is optimized for cheap mismatch rejection.</li>
        <li><b>Determinism:</b> pointers reference canonical docs (CID or stable URL).</li>
        <li><b>Progressive detail:</b> machines fetch deeper layers only when needed.</li>
        <li><b>Extensibility:</b> optional Tier-2 docs allow domain-specific richness without bloating the base layer.</li>
      </ul>
    </section>

    <section id="spec" class="card">
      <h2>PFML Tier-0 Micro Layer</h2>
      <p class="small">
        Tier-0 is a <b>filter token set</b>, not a full geometry model. Keep cardinality low, keep parsing trivial,
        keep the payload small. The goal is to eliminate obvious mismatches fast.
      </p>

      <div class="cols">
        <div class="card" style="background:rgba(11,16,32,.55);">
          <h3>Allowed fields (v0)</h3>
          <ul>
            <li><code>v</code> version (e.g., <code>PF0</code>)</li>
            <li><code>p</code> pointer (CID/URL to Tier-1 doc)</li>
            <li><code>o</code> object class (small enum)</li>
            <li><code>n</code> count bucket (0,1,2,3-5,6+)</li>
            <li><code>q</code> quadrant occupancy bitmask (TL/TR/BL/BR)</li>
            <li><code>a</code> attributes (1–3 low-cardinality tokens, e.g., hair color)</li>
          </ul>
        </div>

        <div class="card" style="background:rgba(11,16,32,.55);">
          <h3>Design constraints</h3>
          <ul>
            <li><b>Byte budget:</b> 64–256 bytes typical.</li>
            <li><b>Token budget:</b> ≤ 12 tokens typical.</li>
            <li><b>No raw pixel geometry</b> in Tier-0.</li>
            <li><b>No free text</b>, no long lists.</li>
            <li><b>High recall</b>: prefer under-filtering over missing true matches.</li>
          </ul>
        </div>

        <div class="card" style="background:rgba(11,16,32,.55);">
          <h3>Examples</h3>
          <div class="mono">
PF0; p=bafy...; o=person; n=2; q=BL+BR; a=hc:red
PF0; p=bafy...; o=car;    n=1; q=TR;    a=color:blk
PF0; p=bafy...; o=dog;    n=3-5; q=TL+TR; a=color:wht
          </div>
          <p class="small" style="margin-top:10px;">
            Tier-0 is intentionally “dumb”. It’s a fast gate, not a truth oracle.
          </p>
        </div>
      </div>

      <div class="hr"></div>

      <h3>Embedding options</h3>
      <p class="small">
        PFML can live in any of these without impacting rendering:
      </p>
      <ul>
        <li><b>HTTP headers:</b> machine-friendly, keeps HTML clean (recommended)</li>
        <li><b>HTML meta:</b> for static hosting and simple crawlers</li>
        <li><b>Sidecar files:</b> <code>.pfml</code> next to media assets</li>
        <li><b>XMP/IPTC:</b> for media pipelines where metadata travels with files</li>
      </ul>

      <div class="mono" style="margin-top:12px;">
&lt;meta name="pfml" content="PF0; p=bafy...; o=person; n=2; q=BL+BR; a=hc:red"&gt;
&lt;link rel="describedby" href="https://cdn.example/himl/bafy.../doc"&gt;
      </div>
    </section>

    <section id="workflow" class="card">
      <h2>Traversal workflow (optimized for compute savings)</h2>
      <p class="small">
        The system is a funnel. Each stage is more expensive but applied to fewer candidates.
      </p>

      <div class="cols">
        <div class="card" style="background:rgba(11,16,32,.55);">
          <h3>Stage 1: Tier-0 filter</h3>
          <ul>
            <li>Parse PFML micro tokens.</li>
            <li>Apply cheap symbolic filters:
              <ul>
                <li><code>o=person</code></li>
                <li><code>q=BL</code></li>
                <li><code>a=hc:red</code></li>
                <li><code>n=2</code></li>
              </ul>
            </li>
            <li>Discard obvious mismatches immediately.</li>
          </ul>
        </div>

        <div class="card" style="background:rgba(11,16,32,.55);">
          <h3>Stage 2: Tier-1 verify</h3>
          <ul>
            <li>Fetch pointer <code>p=...</code> only for survivors.</li>
            <li>Load canonical HIML Doc (CID-addressed).</li>
            <li>Verify spatial predicates using boxes/points:
              <ul>
                <li>“bottom-left” via bbox centers</li>
                <li>“close together” via centroid distance</li>
                <li>hands/feet visibility via keypoints</li>
              </ul>
            </li>
          </ul>
        </div>

        <div class="card" style="background:rgba(11,16,32,.55);">
          <h3>Stage 3: Tier-2 deepen</h3>
          <ul>
            <li>Optional domain docs:
              <ul>
                <li>fashion: garment types</li>
                <li>sports: pose + action taxonomy</li>
                <li>atlas: custom world tags</li>
              </ul>
            </li>
            <li>Optional embedding rerank for semantics.</li>
            <li>Only used when specificity is required.</li>
          </ul>
        </div>
      </div>

      <div class="hr"></div>

      <h3>Why this reduces waste</h3>
      <p class="small">
        Without PFML, systems often do expensive inference or embedding similarity across huge corpora, then still fail on grounding.
        PFML makes the cheap, symbolic “nope” happen first. You spend compute only where a candidate is plausibly correct.
      </p>
    </section>

    <section id="prior" class="card">
      <h2>Has this been done before?</h2>
      <p class="small">
        Pieces exist, but the <b>exact combination</b> is still pretty new:
      </p>

      <ul>
        <li><b>Alt text / tags / microdata:</b> lightweight, but not spatially precise or canonical.</li>
        <li><b>COCO / VOC / keypoint datasets:</b> structured, but not web-native, not pointer-first, not CID-addressed for everyday distribution.</li>
        <li><b>W3C Media Fragments (xywh=percent):</b> a useful concept for spatial referencing, but not a full multi-person annotation + attribute + retrieval layer.</li>
        <li><b>Content-addressed storage (IPFS/CIDs):</b> great for integrity and caching, but not paired with an internet-scale, minimal gating metadata shim.</li>
      </ul>

      <p class="small" style="margin-top:12px;">
        <b>PFML’s novelty</b> is not inventing coordinates. It’s defining a strict, tiny, index-friendly Tier-0 shim
        that lets you traverse enormous datasets with minimal compute, while using HIML’s canonical CID docs for exactness only when needed.
      </p>
    </section>

    <section id="integration" class="card">
      <h2>Integration with HIML</h2>
      <p class="small">
        PFML is not a replacement for HIML. It is a web-native front porch.
        HIML remains the authoritative Tier-1 document for grounded supervision and canonical hashing.
      </p>

      <div class="mono" style="margin-top:12px;">
PFML Tier-0  →  pointer p=cid  →  HIML Doc (Tier-1)  →  optional custom docs (Tier-2)
      </div>

      <h3 style="margin-top:14px;">Backward compatibility</h3>
      <ul>
        <li>Systems that only understand HIML can ignore PFML.</li>
        <li>Systems that want speed can read PFML first, then decide if they fetch HIML.</li>
        <li>Tier-2 remains optional, namespaced, and non-breaking.</li>
      </ul>
    </section>

    <section id="next" class="card">
      <h2>Next steps</h2>
      <ul>
        <li><b>Write PF0 spec:</b> enums, token order, canonicalization, byte budget.</li>
        <li><b>Reference encoder:</b> generate PF0 from HIML Doc (lossy projection).</li>
        <li><b>Indexer:</b> build inverted indexes on Tier-0 tokens (quadrants, class, attributes).</li>
        <li><b>Query planner:</b> Tier-0 filter → Tier-1 verify → Tier-2 optional.</li>
        <li><b>Conformance vectors:</b> ensure identical inputs yield identical PF0 strings.</li>
      </ul>
      <div class="hr"></div>
      <p class="small">
        If HIML is the canonical “deep structure,” PFML is the fast “street map.”
        Together they form a progressive, cache-friendly metadata stack that scales from a single page to internet-scale traversal.
      </p>
    </section>

    <footer>
      <div>
        Builds on: <a href="https://gb2022official-maker.github.io/HIML/" target="_blank" rel="noreferrer">HIML Proposal</a>
      </div>
    </footer>
  </div>
</body>
</html>
